extends ../layout
include ../mixins/work

block nav
  .nav
    ul.buttons
      li.nav-button
        a.text(href='/about') About

      li.nav-button
        a.text(href='/') Population

block content
  .slides-container
    .section.section--current
      .work--full.work(data-hash=current.hash)

        .work-full-image(style=`background-image:url(/works/full/${current.filename})`)
          .full-image-title.rotate-90= current.title
        if parents.length == 2
          .link-to-parent.left <i class='icon-arrow-down'></i> <u>parents</u> <i class='icon-arrow-down'></i>
          .link-to-parent.right <i class='icon-arrow-down'></i> <u>parents</u> <i class='icon-arrow-down'></i>

    if parents.length == 2
      .section.section--parents
        .parents
          + workParent(parents[0])
          .parents__separator.rotate-90 parents
          + workParent(parents[1])
        if siblings && siblings.length > 0

          .link-to-siblings
            i.icon-arrow-down
            &nbsp;
            u= `siblings (${siblings.length})`
            &nbsp;
            i.icon-arrow-down

    if siblings && siblings.length > 0
      .section.screen--siblings.section--siblings
        p.siblings-title siblings
        .siblings
          .siblings__items
            each work in siblings
              .work--thumb.work(data-hash=work.hash)
                a(href=`/language/${work.hash}`)
                  img.work__image(src=`/works/thumb/${work.filename}`)
        if children && children.length > 0
          .link-to-children
            i.icon-arrow-down
            &nbsp;
            u= `children (${children.length})`
            &nbsp;
            i.icon-arrow-down

    if children && children.length > 0
      .section.screen--children.section--children
        p.children-title children
        .children
          .children__items
            each work in children
              .work--thumb.work(data-hash=work.hash)
                a(href=`/language/${work.hash}`)
                  img.work__image(src=`/works/thumb/${work.filename}`)

  script(type='text/javascript').
    window.pageClass = '#{script}';

mixin workParent(parent)
  .work--medium.work.work--has-tools(data-hash=parent.hash, style=`background-image:url(/works/full/${parent.filename})`)
    p.title.title--parent= parent.title
